<div class="carta-container">
  <h1>Iniciar nuevo proceso - Carta de presentación</h1>

  <div class="info-section">
    <!-- Datos Estudiante -->
    <div class="card student-data">
      <h2 class="section-title">Datos Estudiante:</h2>
      <div class="form-group">
        <label><strong>Estudiante:</strong></label>
        <input type="text" [(ngModel)]="studentData.name" disabled />
      </div>
      <div class="form-group">
        <label><strong>Código de estudiante:</strong></label>
        <input type="text" [(ngModel)]="studentData.studentCode" disabled />
      </div>
      <div class="form-group">
        <label><strong>DNI:</strong></label>
        <input type="text" [(ngModel)]="studentData.dni" disabled />
      </div>
      <div class="form-group">
        <label><strong>Teléfono:</strong></label>
        <input type="text" [(ngModel)]="studentData.phone" disabled />
      </div>
      <div class="form-group">
        <label><strong>Correo:</strong></label>
        <input type="email" [(ngModel)]="studentData.email" disabled />
      </div>
    </div>

    <!-- Selección Empresa y Línea de Carrera -->
    <div class="card selection-section">
      <h2 class="section-title">Empresa</h2>
      <div class="form-group">
        <select class="short-input" [(ngModel)]="selectedCompany" (change)="onCompanySelected()">
          <option [ngValue]="null">Seleccione una empresa</option>
          <option *ngFor="let company of companies" [value]="company.id">
            {{ company.razonSocial }}
          </option>
        </select>
      </div>

      <!-- Datos de la empresa (editable si no se selecciona una empresa existente) -->
      <div *ngIf="!selectedCompany">
        <div class="form-group">
          <label><strong>Nombre:</strong></label>
          <input type="text" [(ngModel)]="companyData.name" placeholder="Nombre de la empresa" />
        </div>
        <div class="form-group">
          <label><strong>Domicilio social:</strong></label>
          <input type="text" [(ngModel)]="companyData.address" placeholder="Dirección de la empresa" />
        </div>
        <div class="form-group">
          <label><strong>Teléfono:</strong></label>
          <input type="text" [(ngModel)]="companyData.phone" placeholder="Teléfono de la empresa" />
        </div>
        <div class="form-group">
          <label><strong>Correo electrónico:</strong></label>
          <input type="email" [(ngModel)]="companyData.email" placeholder="Correo de la empresa" />
        </div>
      </div>

      <!-- Datos de la empresa (mostrados si se selecciona una empresa existente) -->
      <div *ngIf="selectedCompany">
        <div class="form-group">
          <label><strong>Nombre:</strong></label>
          <input 
            type="text" 
            [(ngModel)]="companyData.name" 
            [placeholder]="'Nombre de la empresa'" 
            [value]="companyData.name || ''" 
            disabled 
          />
        </div>
        <div class="form-group">
          <label><strong>Domicilio social:</strong></label>
          <input 
            type="text" 
            [(ngModel)]="companyData.address" 
            [placeholder]="'Dirección de la empresa'" 
            [value]="companyData.address || ''" 
            disabled 
          />
        </div>
        <div class="form-group">
          <label><strong>Teléfono:</strong></label>
          <input 
            type="text" 
            [(ngModel)]="companyData.phone" 
            [placeholder]="'Teléfono de la empresa'" 
            [value]="companyData.phone || ''" 
            disabled 
          />
        </div>
        <div class="form-group">
          <label><strong>Correo electrónico:</strong></label>
          <input 
            type="email" 
            [(ngModel)]="companyData.email" 
            [placeholder]="'Correo de la empresa'" 
            [value]="companyData.email || ''" 
            disabled 
          />
        </div>
      </div>

      <h2 class="section-title">Línea de Carrera</h2>
      <div class="form-group">
        <select class="short-input" [(ngModel)]="selectedCareerLine">
          <option [ngValue]="null">Seleccione una línea de carrera</option>
          <option *ngFor="let line of careerLines" [value]="line.id">{{ line.nombre }}</option>
        </select>
      </div>

      <div class="help-section">
        <h2 class="section-title">Ayuda</h2>
        <p>{{ helpPhone }}</p>
        <p>{{ helpEmail }}</p>
      </div>
    </div>
  </div>

  <div class="actions">
    <button class="btn-cancelar">Cancelar</button>
    <button class="btn-confirmar" (click)="validateAndSubmit()">Confirmado</button>
  </div>

  <div *ngIf="showConfirmation" class="confirmation-card">
    <p>Solicitud enviada exitosamente.</p>
  </div>
</div>
